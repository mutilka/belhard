<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>

        div {
            border: 1px solid blue;
            padding: 10px;
            margin: 10px;
            /* width: 300px; */
            /* height: 300px; */
            display: inline-block;
        }


    </style>

</head>
<body>

    <p id="div1"></p>
    <p>
        <button onclick="flash()">Старт</button>
        <button onclick="clearTimeout(timerId)">Стоп</button>
    </p>
    
<!-- Моргают, но все вместе -->

    <script>

    let myDiv = +prompt('Введите количество DIV: ', 3);
    let myDivW = +prompt('Введите ширину DIV: ', 100);
    let myDivH = +prompt('Введите высоту DIV: ', 100);
    let timerId = 0;
    let lalaDiv = '';


    function flash() {
    color = ['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'];
    n = 0;
    s = '#';
    lalaDiv = '';
    
    
    for (i=0; i<6; i++) {
    n = Math.floor(Math.random()*color.length);
    s += color[n]; 
    }

    for (j = 1; j <= myDiv; j++) {
        
        lalaDiv += `<div style="width: ${myDivW}px; height: ${myDivH}px; background-color: ${s};"></div>`
        
    }

    div1.innerHTML = lalaDiv;

    timerId = setTimeout('flash()', 500);

    }

    flash();

    </script>

    <!-- Цвета разные, но не моргают -->

        <!-- <script>

    let myDiv = +prompt('Введите количество DIV: ', 3);
    let myDivW = +prompt('Введите ширину DIV: ', 150);
    let myDivH = +prompt('Введите высоту DIV: ', 150);
    let timerId = 0;
    let lalaDiv = '';
    let s = '';


    for (j = 1; j <= myDiv; j++) {

    function flash() {
    color = ['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'];
    n = 0;
    s = '#';
    lalaDiv = '';
    
    
    for (i=0; i<6; i++) {
    n = Math.floor(Math.random()*color.length);
    s += color[n]; 
    }
    
    timerId = setTimeout('flash()', 500);
        
        
    }

    flash();


    lalaDiv += `<div style="width: ${myDivW}px; height: ${myDivH}px; background-color: ${s};"></div>` 


    div1.innerHTML += lalaDiv;


    }


    </script> -->


<!-- Меняет цвет, но добавляет после div -->

        <!-- <script>

    let myDiv = +prompt('Введите количество DIV: ', 3);
    let myDivW = +prompt('Введите ширину DIV: ', 150);
    let myDivH = +prompt('Введите высоту DIV: ', 150);
    let timerId = 0;
    let lalaDiv = " ";
    let s = '';


    function dinam() {

    for (j = 1; j <= myDiv; j++) {

    function flash() {
    color = ['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'];
    n = 0;
    s = '#';
    
    
    for (i=0; i<6; i++) {
    n = Math.floor(Math.random()*color.length);
    s += color[n]; 
    }   
        
    }

    flash();

    
    lalaDiv = `<div style="width: ${myDivW}px; height: ${myDivH}px; background-color: ${s};"></div>` 


    div1.innerHTML += lalaDiv;

    }
    
    timerId = setTimeout('dinam()', 500);

    }

    dinam();

    </script> -->


</body>
<!-- <div style="width: 300px; height: 300px; background-color: #4edcff;"></div> -->
</html>

